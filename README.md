# Tauri mobile alpha + Apple ecosystem
This template should work on MacOS only.
## Prerequisites

### XCode

#### Downloads
Newest stable XCode:
[XCode 14.3.1 download](https://download.developer.apple.com/Developer_Tools/Xcode_14.3.1/Xcode_14.3.1.xip)

XCode CLI tools:
```bash
$ xcode-select --install
```
If you have other XCode CLI tools installed, make sure to set correct version in XCode.

`XCode > Settings > Locations > Command Line Tools > [latest stable version]`

#### Set up
In order to enable application signing and testing directly on your mobile device you have to add Apple ID to XCode.

`XCode > Settings... > Account > + > Apple ID`

### Rust

#### Downloads
Install
```bash
$ curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
```
or update toolchain
```bash
$ rustup update
```

#### Set up
Add mobile targets:
```bash
$ rustup target add aarch64-apple-ios x86_64-apple-ios aarch64-apple-ios-sim
```
If you'd like to use tauri CLI with cargo:
```bash
$ cargo install tauri-cli --version "^2.0.0-alpha"
```

### Pnpm

#### Downloads
```bash
$ brew install pnpm
```
or you can install it via `npm`
```bash
$ npm install -g pnpm
```

#### Set up

Download project dependecies:
```bash
pnpm i
```

### Development
Use `cargo` / `pnpm`

#### Set up
```bash
src-tauri$ cargo tauri ios init
```

#### Running dev server

If you don't have any mobile device connected you can run this command and choose simulation device.
```bash
src-tauri$ cargo tauri ios dev
```

#### Running on mobile device

1. IPhone `Settings > Privacy & Security`, scroll down to the Developer Mode list item and navigate into it. Then reboot your phone.
2. Connect your phone to your MacOS device with cable.
3. Open XCode project and open run device selection list `Manage Run Destinations > + > <your phone>`
4. Run `cargo tauri ios dev` - application should be copied to your phone.
5. IPhone `Settigns > VPN & Device Management > trust developer
6. Run application

## Important
After opening project in XCode some settings generated by `cargo tauri ios init` might be overwritten (especially after accepting recommended project changes).

```bash
$ cargo tauri ios open
```

In order to fix these issues (`PhaseScriptExecution failed` with code `65`) make sure to set up back correct bundle identifier from `src-tauri/tauri.conf.json` and development team (usually position with your Apple ID username).
To find these settings double click on `.xcodeproj` file in XCode file explorer and go to `Signing & Capabilities`.

If you don't care about your XCode tweaks, you can always remove `src-tauri/gen/apple` and rerun `cargo tauri ios init`.


## Contact

If you have any questions, contact me via discord `adimac93`.